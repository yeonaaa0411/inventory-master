# Base image for Python
FROM python:3.9-slim

# Install necessary Linux packages
RUN apt-get update && apt-get install -y \
    apache2 \
    libapache2-mod-wsgi-py3 \
    && apt-get clean

# Copy application code
WORKDIR /var/www/html
COPY . /var/www/html

# Install Python dependencies
RUN pip install --no-cache-dir -r requirement.txt

# Configure Apache
COPY 000-default.conf /etc/apache2/sites-available/000-default.conf
RUN a2enmod wsgi

# Start script to launch both Apache and Flask
COPY start.sh /usr/local/bin/start.sh
RUN chmod +x /usr/local/bin/start.sh

# Expose necessary ports
EXPOSE 80

# Command to run the start script
CMD ["/usr/local/bin/start.sh"]
# Use an official Python runtime as a parent image
FROM python:3.9-slim

# Set the working directory
WORKDIR /app

# Copy the current directory contents into the container
COPY . /app

# Install any needed dependencies
RUN pip install --no-cache-dir -r requirements.txt

# Expose the port that Flask will run on
EXPOSE 5000

# Command to run the application
CMD ["python", "app.py"]
